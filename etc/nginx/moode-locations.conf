##
# This file contains the standard web moode-ui locations
##

include proxy.conf;

location / {
    root /var/www;
    index index.html index.php;
    try_files $uri $uri/ /coverart.php;
}

location /imagesw/ {
    root /var/local/www;
}

# php-fpm
location ~ \.php$ {
    root /var/www;
    fastcgi_pass unix:/run/php/php8.2-fpm.sock;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $request_filename;
    include fastcgi_params;
}

# Make camillagui available from the same webserver
location /camilladsp/ {
    proxy_pass http://127.0.0.1:15000/;
}

# For camillagui also redirect api and gui
location /api/ {
    proxy_pass http://127.0.0.1:15000/api/;
}
location /gui/ {
    proxy_pass http://127.0.0.1:15000/gui/;
}
